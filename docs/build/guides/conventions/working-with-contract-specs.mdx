---
title: Work with ContractSpecs in Other Languages
hide_table_of_contents: true
draft: true
---

# Stellar Network and Soroban Smart Contracts Documentation

## Table of Contents

1. [Introduction](#introduction)
2. [Prerequisites](#prerequisites)
3. [Tutorials](#tutorials) 3.1 [Reading from a Contract](#reading-from-a-contract) 3.2 [Writing to a Contract](#writing-to-a-contract) 3.3 [Handling Contract Events](#handling-contract-events)
4. [Advanced Topics](#advanced-topics) 4.1 [Upgrading Contracts](#upgrading-contracts) 4.2 [Interacting with Multiple Contracts](#interacting-with-multiple-contracts)

## Introduction

The Stellar network is an open-source, distributed, and community-owned network used to facilitate cross-asset transfers of value. Soroban is Stellar's smart contract platform, designed to be safe, scalable, and easy to use.

A contract specification typically includes:

1. **Contract Address**: The unique identifier for the deployed contract on the Stellar network.
2. **ABI (Application Binary Interface)**: Defines the methods and their parameters that can be called on the contract.
3. **State Variables**: The data stored within the contract.
4. **Events**: Notifications emitted by the contract when certain actions occur.
5. **Functions**: The callable methods of the contract, including their inputs and outputs.

These details guide the interaction with contracts through your chosen programming language by providing a clear interface for communication between your application and the smart contract on the Stellar network.

## Prerequisites

To interact with Soroban smart contracts on the Stellar network, you'll need the following tools and libraries for each language:

### Go

- Go 1.16+
- Stellar SDK for Go: `go get github.com/stellar/go`

### Java

- Java 8+
- Gradle or Maven for dependency management
- Stellar SDK for Java: Add to your `build.gradle` or `pom.xml`

### Python

- Python 3.7+
- `stellar-sdk`: `pip install stellar-sdk`

## Tutorials

### Reading from a Contract

Here are examples of reading data from a Soroban smart contract in Go, Java, and Python:

#### Go

```go
package main

import (
    "fmt"
    "log"

    "github.com/stellar/go/clients/horizonclient"
    "github.com/stellar/go/protocols/horizon"
    "github.com/stellar/go/txnbuild"
)

func main() {
    client := horizonclient.DefaultTestNetClient
    contractID := "CC..." // Replace with actual contract ID

    // Create a transaction to invoke the contract
    sourceAccount, err := client.AccountDetail(horizonclient.AccountRequest{AccountID: "G..."}) // Replace with your account
    if err != nil {
        log.Fatalf("Error getting account details: %v", err)
    }

    op := txnbuild.InvokeHostFunction{
        HostFunction: txnbuild.HostFunction{
            Function: txnbuild.HostFunctionTypeContractCall,
            Parameters: []txnbuild.HostFunctionParameter{
                {Type: txnbuild.HostFunctionParameterTypeContractAddress, Value: contractID},
                {Type: txnbuild.HostFunctionParameterTypeString, Value: "get"},
            },
        },
    }

    tx, err := txnbuild.NewTransaction(
        txnbuild.TransactionParams{
            SourceAccount:        &sourceAccount,
            IncrementSequenceNum: true,
            Operations:           []txnbuild.Operation{&op},
            BaseFee:              txnbuild.MinBaseFee,
            Preconditions:        txnbuild.Preconditions{TimeBounds: txnbuild.NewTimeout(300)},
        },
    )
    if err != nil {
        log.Fatalf("Error creating transaction: %v", err)
    }

    // Sign and submit the transaction
    // (Signing step omitted for brevity)

    resp, err := client.SubmitTransaction(tx)
    if err != nil {
        log.Fatalf("Error submitting transaction: %v", err)
    }

    fmt.Printf("Contract value: %s\n", resp.ResultXdr)
}
```

#### Java

```java
import org.stellar.sdk.*;
import org.stellar.sdk.responses.AccountResponse;
import org.stellar.sdk.responses.SubmitTransactionResponse;

public class ContractReader {
    public static void main(String[] args) {
        Server server = new Server("https://horizon-testnet.stellar.org");
        String contractId = "CC..."; // Replace with actual contract ID

        try {
            AccountResponse sourceAccount = server.accounts().account("G..."); // Replace with your account

            InvokeHostFunctionOperation operation = new InvokeHostFunctionOperation.Builder()
                .setFunction(
                    InvokeHostFunctionOperation.Function.contractCall(
                        contractId,
                        "get",
                        new org.stellar.sdk.xdr.ScVal[0]
                    )
                )
                .build();

            Transaction transaction = new TransactionBuilder(sourceAccount, Network.TESTNET)
                .addOperation(operation)
                .setTimeout(30)
                .setBaseFee(Transaction.MIN_BASE_FEE)
                .build();

            // Sign the transaction
            // (Signing step omitted for brevity)

            SubmitTransactionResponse response = server.submitTransaction(transaction);

            if (response.isSuccess()) {
                System.out.println("Contract value: " + response.getResultXdr());
            } else {
                System.err.println("Transaction failed: " + response.getExtras().getResultCodes().getTransactionResultCode());
            }
        } catch (Exception e) {
            System.err.println("Error reading from contract: " + e.getMessage());
        }
    }
}
```

#### Python

```python
from stellar_sdk import Server, Network, Keypair, TransactionBuilder
from stellar_sdk.soroban import Contract
from stellar_sdk.exceptions import BadRequestError, BadResponseError

async def read_contract():
    server = Server("https://horizon-testnet.stellar.org")
    network_passphrase = Network.TESTNET_NETWORK_PASSPHRASE
    contract_id = "CC..."  # Replace with actual contract ID

    source_keypair = Keypair.from_secret("S...")  # Replace with your secret key
    source_account = await server.load_account(source_keypair.public_key)

    contract = Contract(contract_id)

    try:
        transaction = (
            TransactionBuilder(
                source_account=source_account,
                network_passphrase=network_passphrase,
                base_fee=100)
            .add_operation(contract.call("get"))
            .set_timeout(30)
            .build()
        )

        transaction.sign(source_keypair)
        response = await server.submit_transaction(transaction)
        print(f"Contract value: {response['result_xdr']}")
    except (BadRequestError, BadResponseError) as e:
        print(f"Error reading from contract: {e}")

# Run the async function
import asyncio
asyncio.run(read_contract())
```

### Writing to a Contract

Examples of writing to a contract (incrementing a counter) in each language:

#### Go

```go
package main

import (
    "fmt"
    "log"

    "github.com/stellar/go/clients/horizonclient"
    "github.com/stellar/go/keypair"
    "github.com/stellar/go/network"
    "github.com/stellar/go/txnbuild"
)

func main() {
    client := horizonclient.DefaultTestNetClient
    contractID := "CC..." // Replace with actual contract ID
    secretKey := "S..."   // Replace with actual secret key

    kp, err := keypair.Parse(secretKey)
    if err != nil {
        log.Fatalf("Error parsing secret key: %v", err)
    }

    sourceAccount, err := client.AccountDetail(horizonclient.AccountRequest{AccountID: kp.Address()})
    if err != nil {
        log.Fatalf("Error getting account details: %v", err)
    }

    op := txnbuild.InvokeHostFunction{
        HostFunction: txnbuild.HostFunction{
            Function: txnbuild.HostFunctionTypeContractCall,
            Parameters: []txnbuild.HostFunctionParameter{
                {Type: txnbuild.HostFunctionParameterTypeContractAddress, Value: contractID},
                {Type: txnbuild.HostFunctionParameterTypeString, Value: "increment"},
            },
        },
    }

    tx, err := txnbuild.NewTransaction(
        txnbuild.TransactionParams{
            SourceAccount:        &sourceAccount,
            IncrementSequenceNum: true,
            Operations:           []txnbuild.Operation{&op},
            BaseFee:              txnbuild.MinBaseFee,
            Preconditions:        txnbuild.Preconditions{TimeBounds: txnbuild.NewTimeout(300)},
        },
    )
    if err != nil {
        log.Fatalf("Error creating transaction: %v", err)
    }

    tx, err = tx.Sign(network.TestNetworkPassphrase, kp.(*keypair.Full))
    if err != nil {
        log.Fatalf("Error signing transaction: %v", err)
    }

    resp, err := client.SubmitTransaction(tx)
    if err != nil {
        log.Fatalf("Error submitting transaction: %v", err)
    }

    fmt.Printf("Transaction successful. New counter value: %v\n", resp.ResultXdr)
}
```

#### Java

```java
import org.stellar.sdk.*;
import org.stellar.sdk.responses.AccountResponse;
import org.stellar.sdk.responses.SubmitTransactionResponse;

public class ContractWriter {
    public static void main(String[] args) {
        Server server = new Server("https://horizon-testnet.stellar.org");
        String contractId = "CC..."; // Replace with actual contract ID
        String secretKey = "S..."; // Replace with actual secret key

        try {
            KeyPair sourceKeypair = KeyPair.fromSecretSeed(secretKey);
            AccountResponse sourceAccount = server.accounts().account(sourceKeypair.getAccountId());

            InvokeHostFunctionOperation operation = new InvokeHostFunctionOperation.Builder()
                .setFunction(
                    InvokeHostFunctionOperation.Function.contractCall(
                        contractId,
                        "increment",
                        new org.stellar.sdk.xdr.ScVal[0]
                    )
                )
                .build();

            Transaction transaction = new TransactionBuilder(sourceAccount, Network.TESTNET)
                .addOperation(operation)
                .setTimeout(30)
                .setBaseFee(Transaction.MIN_BASE_FEE)
                .build();

            transaction.sign(sourceKeypair);
            SubmitTransactionResponse response = server.submitTransaction(transaction);

            if (response.isSuccess()) {
                System.out.println("Transaction successful. New counter value: " + response.getResultXdr());
            } else {
                System.err.println("Transaction failed: " + response.getExtras().getResultCodes().getTransactionResultCode());
            }
        } catch (Exception e) {
            System.err.println("Error writing to contract: " + e.getMessage());
        }
    }
}
```

#### Python

```python
from stellar_sdk import Server, Network, Keypair, TransactionBuilder
from stellar_sdk.soroban import Contract
from stellar_sdk.exceptions import BadRequestError, BadResponseError

async def increment_counter(secret_key):
    server = Server("https://horizon-testnet.stellar.org")
    network_passphrase = Network.TESTNET_NETWORK_PASSPHRASE
    contract_id = "CC..."  # Replace with actual contract ID

    source_keypair = Keypair.from_secret(secret_key)
    source_account = await server.load_account(source_keypair.public_key)

    contract = Contract(contract_id)

    try:
        transaction = (
            TransactionBuilder(
                source_account=source_account,
                network_passphrase=network_passphrase,
                base_fee=100)
            .add_operation(contract.call("increment"))
            .set_timeout(30)
            .build()
        )

        transaction.sign(source_keypair)
        response = await server.submit_transaction(transaction)
        print(f"Transaction successful. New counter value: {response['result_xdr']}")
    except (BadRequestError, BadResponseError) as e:
        print(f"Error writing to contract: {e}")

# Run the async function
import asyncio
asyncio.run(increment_counter("S..."))  # Replace with actual secret key
```

### Handling Contract Events

Examples of listening for events from a contract in each language:

#### Go

```go
package main

import (
    "fmt"
    "log"

    "github.com/stellar/go/clients/horizonclient"
    "github.com/stellar/go/protocols/horizon"
)

func main() {
    client := horizonclient.DefaultTestNetClient
    contractID := "CC..." // Replace with actual contract ID

    // Create an operation request to listen for contract events
    opRequest := horizonclient.OperationRequest{
        ForAccount: contractID,
        Cursor:     "now",
    }

    ctx, cancel := context.WithCancel(context.Background())
    defer cancel()

    go client.StreamOperations(ctx, opRequest, func(op horizon.Operation) {
        event, ok := op.(horizon.ContractEvent)
        if !ok {
            return
        }
        fmt.Printf("New event: %+v\n", event)
        // Handle the event based on its type and data
    })

    // Keep the program running
    select {}
}
```

#### Java

```java
import org.stellar.sdk.*;
import org.stellar.sdk.requests.EventsRequestBuilder;
import org.stellar.sdk.responses.operations.OperationResponse;

public class ContractEventListener {
    public static void main(String[] args) {
        Server server = new Server("https://horizon-testnet.stellar.org");
        String contractId = "CC..."; // Replace with actual contract ID

        try {
            EventsRequestBuilder eventsRequest = server.events();
            eventsRequest.forContract(contractId);
            eventsRequest.cursor("now");

            eventsRequest.stream(new EventListener<OperationResponse>() {
                @Override
                public void onEvent(OperationResponse event) {
                    System.out.println("New event: " + event);
                    // Handle the event based on its type and data
                }

                @Override
                public void onFailure(Optional<Throwable> error) {
                    System.err.println("Error in event stream: " + error.orElse(new Exception("Unknown error")));
                }
            });

            // Keep the program running
            while (true) {
                Thread.sleep(1000);
            }
        } catch (Exception e) {
            System.err.println("Error setting up event listener: " + e.getMessage());
        }
    }
}
```

#### Python

```python
from stellar_sdk import Server
from stellar_sdk.soroban import Contract

async def listen_for_events():
    server = Server("https://horizon-testnet.stellar.org")
    contract_id = "CC..."  # Replace with actual contract ID

    contract = Contract(contract_id)

    async for event in contract.events(server):
        print(f"New event: {event}")
```
